# Paper Research API - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# API KEYS (Required - choose one)
# =============================================================================

# OpenRouter API Key (Recommended - access to 400+ models)
# Get yours at: https://openrouter.ai/settings/keys
OPENROUTER_API_KEY=sk-or-v1-your-key-here

# Voyage AI API Key (For embeddings used in vector search)
# Get yours at: https://www.voyageai.com/
# VOYAGE_API_KEY=pa-your-voyage-key-here

# =============================================================================
# OpenRouter Configuration (Optional)
# =============================================================================

OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# =============================================================================
# DSPy / LLM Configuration (Optional)
# =============================================================================

# Model to use (OpenRouter format)
DSPY_MODEL=openrouter/google/gemini-2.5-pro-preview

# Fallback model if not using OpenRouter
DSPY_FALLBACK_MODEL=openai/gpt-4o-mini

# Number of async workers for DSPy
DSPY_MAX_WORKERS=4

# =============================================================================
# Retrieval Configuration (Optional)
# =============================================================================

# Number of papers to retrieve for context
RETRIEVAL_TOP_K=3

# Embedding model for vector search
EMBEDDING_MODEL=voyage-4-lite
EMBEDDING_DIM=1024

# =============================================================================
# Application Configuration (Optional)
# =============================================================================

APP_NAME=Telkom Paper Research API
APP_VERSION=1.0.0
APP_DESCRIPTION=AI-powered paper research platform for Telkom University

# Server settings
HOST=0.0.0.0
PORT=8000
DEBUG=false

# CORS origins (comma-separated string)
CORS_ORIGINS_STR=http://localhost:3000,http://localhost:5173,http://127.0.0.1:5500

# =============================================================================
# Database Configuration (Required for production)
# =============================================================================

# Option A: Full Database URL (Recommended for Supabase)
# Get this from Supabase Dashboard → Settings → Database → Connection String
# Format: postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
DATABASE_URL=postgresql+asyncpg://postgres:your-password@db.your-project-ref.supabase.co:5432/postgres

# Option B: Individual Connection Parameters
# DATABASE_HOST=db.your-project-ref.supabase.co
# DATABASE_PORT=5432
# DATABASE_NAME=postgres
# DATABASE_USER=postgres
# DATABASE_PASSWORD=your-password-here

# Connection Pool Settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# =============================================================================
# Redis Configuration (Optional - for conversation history)
# =============================================================================

# Redis connection URL
# Local development
REDIS_URL=redis://localhost:6379

# Production (Redis Cloud, Upstash, etc.)
# REDIS_URL=redis://default:password@redis-xxxxx.cloud.redislabs.com:12345

# Optional: Redis password if using authentication
# REDIS_PASSWORD=your-redis-password

# Session configuration
SESSION_TTL=3600  # Session TTL in seconds (default: 1 hour)
MAX_MESSAGES_PER_SESSION=50  # Maximum messages to keep per session
AUTO_SYNC_TO_DB=true  # Automatically sync to database
SYNC_INTERVAL=300  # Sync interval in seconds (5 minutes)

# =============================================================================
# Data Configuration (Optional - only for mock data)
# =============================================================================

# Path to papers JSON file (fallback if database not configured)
PAPERS_DATA_PATH=data/papers.json
